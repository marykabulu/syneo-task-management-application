<div class="dashboard-container">
  <!-- Sidebar Toggle Button -->
  <button class="sidebar-toggle" (click)="toggleSidebar()">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Sidebar -->
  <nav class="sidebar" [class.collapsed]="isSidebarCollapsed">
    <div class="sidebar-header">
      <div class="logo">
        <div class="logo-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="logo-text">Admin Control</div>
      </div>
    </div>

    <div class="nav-menu">
      <div class="nav-item" [class.active]="activeSection === 'overview'" (click)="setActiveSection('overview')">
        <div class="nav-content">
          <i class="fas fa-tachometer-alt"></i>
          <span>Overview</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['overview']" (click)="toggleFavorite('overview', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'enrollment'" (click)="setActiveSection('enrollment')">
        <div class="nav-content">
          <i class="fas fa-user-plus"></i>
          <span>Enrollment Wizard</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['enrollment']" (click)="toggleFavorite('enrollment', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'timetable'" (click)="setActiveSection('timetable')">
        <div class="nav-content">
          <i class="fas fa-calendar-alt"></i>
          <span>Timetable Editor</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['timetable']" (click)="toggleFavorite('timetable', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'policies'" (click)="setActiveSection('policies')">
        <div class="nav-content">
          <i class="fas fa-cogs"></i>
          <span>Policy Center</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['policies']" (click)="toggleFavorite('policies', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'audit'" (click)="setActiveSection('audit')">
        <div class="nav-content">
          <i class="fas fa-clipboard-list"></i>
          <span>Audit Log Viewer</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['audit']" (click)="toggleFavorite('audit', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'user-management'" (click)="setActiveSection('user-management')">
        <div class="nav-content">
          <i class="fas fa-user-plus"></i>
          <span>User Management</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['user-management']" (click)="toggleFavorite('user-management', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'teacher-heatmap'" (click)="setActiveSection('teacher-heatmap')">
        <div class="nav-content">
          <i class="fas fa-chart-bar"></i>
          <span>Teacher Heatmap</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['teacher-heatmap']" (click)="toggleFavorite('teacher-heatmap', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'announcements'" (click)="setActiveSection('announcements')">
        <div class="nav-content">
          <i class="fas fa-bullhorn"></i>
          <span>Announcements</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['announcements']" (click)="toggleFavorite('announcements', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'billing'" (click)="setActiveSection('billing')">
        <div class="nav-content">
          <i class="fas fa-credit-card"></i>
          <span>Billing Management</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['billing']" (click)="toggleFavorite('billing', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'class-wizard'" (click)="setActiveSection('class-wizard')">
        <div class="nav-content">
          <i class="fas fa-chalkboard"></i>
          <span>Class Creation</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['class-wizard']" (click)="toggleFavorite('class-wizard', $event)"></i>
      </div>
      <div class="nav-item" [class.active]="activeSection === 'permissions'" (click)="setActiveSection('permissions')">
        <div class="nav-content">
          <i class="fas fa-users-cog"></i>
          <span>Role Permissions</span>
        </div>
        <i class="fas fa-star favorite-star" [class.favorited]="favorites['permissions']" (click)="toggleFavorite('permissions', $event)"></i>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content" [class.expanded]="isSidebarCollapsed">
    <!-- Header -->
    <header class="header">
      <div class="welcome-section">
        <h1>Admin Control Center</h1>
        <p>System administration and configuration</p>
      </div>
      
      <div class="admin-profile">
        <div class="admin-info">
          <div class="admin-details">
            <h3>{{admin.name}} {{admin.surname}}</h3>
            <p>{{admin.role}}</p>
            <p class="admin-id">ID: {{admin.id}}</p>
          </div>
        </div>
      </div>
    </header>

    <!-- Content Sections -->
    <div class="content-area">
      <!-- Overview Section -->
      <div *ngIf="activeSection === 'overview'" class="section overview-section">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon users-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-info">
              <h3>{{stats.totalUsers}}</h3>
              <p>Total Users</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon teachers-icon">
              <i class="fas fa-chalkboard-teacher"></i>
            </div>
            <div class="stat-info">
              <h3>{{stats.activeTeachers}}</h3>
              <p>Active Teachers</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon students-icon">
              <i class="fas fa-user-graduate"></i>
            </div>
            <div class="stat-info">
              <h3>{{stats.totalStudents}}</h3>
              <p>Total Students</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon alerts-icon">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="stat-info">
              <h3>{{stats.systemAlerts}}</h3>
              <p>System Alerts</p>
            </div>
          </div>
        </div>

        <div class="quick-actions">
          <h2>Quick Actions</h2>
          <div class="action-buttons">
            <button *ngFor="let item of getFavoriteItems()" class="action-btn primary" (click)="setActiveSection(item.section)">
              <i class="fas" [ngClass]="item.icon"></i>
              {{item.name}}
            </button>
          </div>
        </div>
      </div>

      <!-- Enrollment Wizard Section -->
      <div *ngIf="activeSection === 'enrollment'" class="section enrollment-section">
        <div class="wizard-header">
          <h2>Student Enrollment Wizard</h2>
          <div class="progress-bar">
            <div class="progress" [style.width.%]="(currentStep / totalSteps) * 100"></div>
          </div>
          <p>Step {{currentStep}} of {{totalSteps}}</p>
        </div>

        <!-- Step 1: Personal Information -->
        <div *ngIf="currentStep === 1" class="wizard-step">
          <h3>Personal Information</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>First Name *</label>
              <input type="text" [(ngModel)]="enrollmentData.firstName" required>
            </div>
            <div class="form-group">
              <label>Middle Name</label>
              <input type="text" [(ngModel)]="enrollmentData.middleName">
            </div>
            <div class="form-group">
              <label>Last Name *</label>
              <input type="text" [(ngModel)]="enrollmentData.lastName" required>
            </div>
            <div class="form-group">
              <label>Preferred Name</label>
              <input type="text" [(ngModel)]="enrollmentData.preferredName">
            </div>
            <div class="form-group">
              <label>Date of Birth *</label>
              <input type="date" [(ngModel)]="enrollmentData.dateOfBirth" required>
            </div>
            <div class="form-group">
              <label>Gender *</label>
              <select [(ngModel)]="enrollmentData.gender" required>
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Non-binary">Non-binary</option>
                <option value="Prefer not to say">Prefer not to say</option>
              </select>
            </div>
            <div class="form-group">
              <label>Nationality *</label>
              <input type="text" [(ngModel)]="enrollmentData.nationality" required>
            </div>
          </div>
        </div>

        <!-- Step 2: Contact Information -->
        <div *ngIf="currentStep === 2" class="wizard-step">
          <h3>Contact Information</h3>
          <div class="form-grid">
            <div class="form-group full-width">
              <label>Street Address *</label>
              <input type="text" [(ngModel)]="enrollmentData.homeAddress.street" required>
            </div>
            <div class="form-group">
              <label>Suburb *</label>
              <input type="text" [(ngModel)]="enrollmentData.homeAddress.suburb" required>
            </div>
            <div class="form-group">
              <label>City *</label>
              <input type="text" [(ngModel)]="enrollmentData.homeAddress.city" required>
            </div>
            <div class="form-group">
              <label>Province *</label>
              <input type="text" [(ngModel)]="enrollmentData.homeAddress.province" required>
            </div>
            <div class="form-group">
              <label>Postal Code *</label>
              <input type="text" [(ngModel)]="enrollmentData.homeAddress.postalCode" required>
            </div>
            <div class="form-group">
              <label>Primary Contact *</label>
              <input type="tel" [(ngModel)]="enrollmentData.primaryContact" required>
            </div>
            <div class="form-group">
              <label>Alternate Contact</label>
              <input type="tel" [(ngModel)]="enrollmentData.alternateContact">
            </div>
            <div class="form-group">
              <label>Student Email</label>
              <input type="email" [(ngModel)]="enrollmentData.studentEmail">
            </div>
          </div>
        </div>

        <!-- Step 3: Parent/Guardian Details -->
        <div *ngIf="currentStep === 3" class="wizard-step">
          <h3>Parent/Guardian Details</h3>
          <div class="guardian-section">
            <h4>Primary Guardian</h4>
            <div class="form-grid">
              <div class="form-group">
                <label>Full Name *</label>
                <input type="text" [(ngModel)]="enrollmentData.primaryGuardian.name" required>
              </div>
              <div class="form-group">
                <label>Relationship *</label>
                <select [(ngModel)]="enrollmentData.primaryGuardian.relationship" required>
                  <option value="">Select Relationship</option>
                  <option value="Mother">Mother</option>
                  <option value="Father">Father</option>
                  <option value="Grandmother">Grandmother</option>
                  <option value="Grandfather">Grandfather</option>
                  <option value="Guardian">Guardian</option>
                </select>
              </div>
              <div class="form-group">
                <label>Occupation</label>
                <input type="text" [(ngModel)]="enrollmentData.primaryGuardian.occupation">
              </div>
              <div class="form-group">
                <label>Contact Number *</label>
                <input type="tel" [(ngModel)]="enrollmentData.primaryGuardian.contact" required>
              </div>
              <div class="form-group">
                <label>Email Address</label>
                <input type="email" [(ngModel)]="enrollmentData.primaryGuardian.email">
              </div>
            </div>
          </div>
          <div class="guardian-section">
            <h4>Emergency Contact</h4>
            <div class="form-grid">
              <div class="form-group">
                <label>Emergency Contact Name *</label>
                <input type="text" [(ngModel)]="enrollmentData.emergencyContact.name" required>
              </div>
              <div class="form-group">
                <label>Emergency Contact Number *</label>
                <input type="tel" [(ngModel)]="enrollmentData.emergencyContact.contact" required>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 4: Academic Details -->
        <div *ngIf="currentStep === 4" class="wizard-step">
          <h3>Academic Details</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Grade Applying For *</label>
              <select [(ngModel)]="enrollmentData.gradeApplyingFor" required>
                <option value="">Select Grade</option>
                <option *ngFor="let grade of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="'Grade ' + grade">Grade {{grade}}</option>
              </select>
            </div>
            <div class="form-group">
              <label>Previous School Name</label>
              <input type="text" [(ngModel)]="enrollmentData.previousSchool">
            </div>
            <div class="form-group">
              <label>Previous Grade Completed</label>
              <input type="text" [(ngModel)]="enrollmentData.previousGrade">
            </div>
          </div>
        </div>

        <!-- Step 5: Medical Information -->
        <div *ngIf="currentStep === 5" class="wizard-step">
          <h3>Medical Information</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Medical Aid Provider</label>
              <input type="text" [(ngModel)]="enrollmentData.medicalAid.provider">
            </div>
            <div class="form-group">
              <label>Medical Aid Number</label>
              <input type="text" [(ngModel)]="enrollmentData.medicalAid.number">
            </div>
            <div class="form-group full-width">
              <label>Known Allergies</label>
              <textarea [(ngModel)]="enrollmentData.allergies" rows="3"></textarea>
            </div>
            <div class="form-group full-width">
              <label>Chronic Conditions</label>
              <textarea [(ngModel)]="enrollmentData.chronicConditions" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label>Doctor's Name</label>
              <input type="text" [(ngModel)]="enrollmentData.doctorDetails.name">
            </div>
            <div class="form-group">
              <label>Doctor's Contact</label>
              <input type="tel" [(ngModel)]="enrollmentData.doctorDetails.contact">
            </div>
            <div class="form-group full-width">
              <label class="checkbox-label">
                <input type="checkbox" [(ngModel)]="enrollmentData.emergencyMedicalConsent">
                Emergency Medical Consent *
              </label>
            </div>
          </div>
        </div>

        <!-- Step 6: Additional Information -->
        <div *ngIf="currentStep === 6" class="wizard-step">
          <h3>Additional Information</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Citizenship *</label>
              <input type="text" [(ngModel)]="enrollmentData.citizenship" required>
            </div>
            <div class="form-group">
              <label>ID Number / Passport Number</label>
              <input type="text" [(ngModel)]="enrollmentData.idNumber">
            </div>
            <div class="form-group">
              <label>First Language *</label>
              <input type="text" [(ngModel)]="enrollmentData.firstLanguage" required>
            </div>
            <div class="form-group">
              <label>Second Language</label>
              <input type="text" [(ngModel)]="enrollmentData.secondLanguage">
            </div>
            <div class="form-group">
              <label>Religious Preference</label>
              <input type="text" [(ngModel)]="enrollmentData.religiousPreference">
            </div>
            <div class="form-group">
              <label>Transport Requirements</label>
              <select [(ngModel)]="enrollmentData.transportRequirements">
                <option value="">Select Option</option>
                <option value="School Bus">School Bus</option>
                <option value="Private Transport">Private Transport</option>
                <option value="Walking">Walking</option>
              </select>
            </div>
            <div class="form-group">
              <label>Boarding Preference</label>
              <select [(ngModel)]="enrollmentData.boardingPreference">
                <option value="">Select Option</option>
                <option value="Day Scholar">Day Scholar</option>
                <option value="Boarding">Boarding</option>
              </select>
            </div>
            <div class="form-group full-width">
              <label>Special Needs / Learning Support</label>
              <textarea [(ngModel)]="enrollmentData.specialNeeds" rows="3"></textarea>
            </div>
          </div>
        </div>

        <!-- Step 7: Document Uploads -->
        <div *ngIf="currentStep === 7" class="wizard-step">
          <h3>Document Uploads</h3>
          <div class="document-grid">
            <div class="document-item">
              <label>Birth Certificate *</label>
              <div class="file-upload">
                <input type="file" accept=".pdf,.jpg,.png" style="display: none;">
                <div class="upload-box">
                  <i class="fas fa-upload"></i>
                  <p>Click to upload or drag & drop</p>
                </div>
              </div>
            </div>
            <div class="document-item">
              <label>Proof of Residence *</label>
              <div class="file-upload">
                <input type="file" accept=".pdf,.jpg,.png" style="display: none;">
                <div class="upload-box">
                  <i class="fas fa-upload"></i>
                  <p>Click to upload or drag & drop</p>
                </div>
              </div>
            </div>
            <div class="document-item">
              <label>Parent/Guardian ID Copies *</label>
              <div class="file-upload">
                <input type="file" accept=".pdf,.jpg,.png" multiple style="display: none;">
                <div class="upload-box">
                  <i class="fas fa-upload"></i>
                  <p>Click to upload or drag & drop</p>
                </div>
              </div>
            </div>
            <div class="document-item">
              <label>Immunization Record</label>
              <div class="file-upload">
                <input type="file" accept=".pdf,.jpg,.png" style="display: none;">
                <div class="upload-box">
                  <i class="fas fa-upload"></i>
                  <p>Click to upload or drag & drop</p>
                </div>
              </div>
            </div>
            <div class="document-item">
              <label>Previous School Reports</label>
              <div class="file-upload">
                <input type="file" accept=".pdf,.jpg,.png" multiple style="display: none;">
                <div class="upload-box">
                  <i class="fas fa-upload"></i>
                  <p>Click to upload or drag & drop</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 8: Fees & Payment Setup -->
        <div *ngIf="currentStep === 8" class="wizard-step">
          <h3>Fees & Payment Setup</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Payment Option *</label>
              <select [(ngModel)]="enrollmentData.paymentOption" required>
                <option value="">Select Payment Option</option>
                <option value="Monthly">Monthly</option>
                <option value="Quarterly">Quarterly</option>
                <option value="Annually">Annually</option>
              </select>
            </div>
            <div class="form-group">
              <label>Preferred Payment Method *</label>
              <select [(ngModel)]="enrollmentData.paymentMethod" required>
                <option value="">Select Payment Method</option>
                <option value="Debit Order">Debit Order</option>
                <option value="EFT">EFT</option>
                <option value="Credit Card">Credit Card</option>
                <option value="Cash">Cash</option>
              </select>
            </div>
            <div class="form-group">
              <label>Billing Contact Name</label>
              <input type="text" [(ngModel)]="enrollmentData.billingContact.name">
            </div>
            <div class="form-group">
              <label>Billing Contact Email</label>
              <input type="email" [(ngModel)]="enrollmentData.billingContact.email">
            </div>
            <div class="form-group">
              <label>Billing Contact Phone</label>
              <input type="tel" [(ngModel)]="enrollmentData.billingContact.phone">
            </div>
          </div>
        </div>

        <!-- Step 9: Review & Consent -->
        <div *ngIf="currentStep === 9" class="wizard-step">
          <h3>Review & Consent</h3>
          <div class="review-section">
            <div class="consent-items">
              <div class="consent-item">
                <label class="checkbox-label">
                  <input type="checkbox" [(ngModel)]="enrollmentData.termsConsent" required>
                  I agree to the Terms & Conditions *
                </label>
              </div>
              <div class="consent-item">
                <label class="checkbox-label">
                  <input type="checkbox" [(ngModel)]="enrollmentData.privacyConsent" required>
                  I consent to data processing as per Privacy Policy *
                </label>
              </div>
            </div>
            <div class="signature-section">
              <label>Digital Signature *</label>
              <input type="text" [(ngModel)]="enrollmentData.signature" placeholder="Type your full name as signature" required>
            </div>
            <div class="summary-info">
              <h4>Enrollment Summary</h4>
              <p><strong>Student:</strong> {{enrollmentData.firstName}} {{enrollmentData.lastName}}</p>
              <p><strong>Grade:</strong> {{enrollmentData.gradeApplyingFor}}</p>
              <p><strong>Guardian:</strong> {{enrollmentData.primaryGuardian.name}}</p>
              <p><strong>Contact:</strong> {{enrollmentData.primaryGuardian.contact}}</p>
            </div>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="wizard-navigation">
          <button *ngIf="currentStep > 1" class="nav-btn prev" (click)="previousStep()">
            <i class="fas fa-arrow-left"></i>
            Previous
          </button>
          <button *ngIf="currentStep < totalSteps" class="nav-btn next" (click)="nextStep()">
            Next
            <i class="fas fa-arrow-right"></i>
          </button>
          <button *ngIf="currentStep === totalSteps" class="nav-btn submit" (click)="submitEnrollment()">
            <i class="fas fa-check"></i>
            Submit Enrollment
          </button>
        </div>

        <!-- Bulk Enrollment Option -->
        <div class="bulk-enrollment">
          <h3>Bulk Enrollment</h3>
          <div class="upload-area">
            <i class="fas fa-cloud-upload-alt"></i>
            <p>Upload CSV file with student data</p>
            <input type="file" accept=".csv" style="display: none;">
          </div>
          <button class="bulk-btn" (click)="bulkEnroll()">
            <i class="fas fa-upload"></i>
            Process Bulk Upload
          </button>
        </div>
      </div>

      <!-- Timetable Editor Section -->
      <div *ngIf="activeSection === 'timetable'" class="section timetable-section">
        <h2>Timetable Editor</h2>
        
        <div class="timetable-controls">
          <button class="save-btn" (click)="saveTimetable()">
            <i class="fas fa-save"></i>
            Save Timetable
          </button>
        </div>

        <div class="timetable-grid">
          <div class="time-header">Time</div>
          <div class="day-header">Monday</div>
          <div class="day-header">Tuesday</div>
          <div class="day-header">Wednesday</div>
          <div class="day-header">Thursday</div>
          <div class="day-header">Friday</div>

          <ng-container *ngFor="let slot of timetableSlots">
            <div class="time-slot">{{slot.time}}</div>
            <div class="subject-slot" contenteditable="true">{{slot.monday}}</div>
            <div class="subject-slot" contenteditable="true">{{slot.tuesday}}</div>
            <div class="subject-slot" contenteditable="true">{{slot.wednesday}}</div>
            <div class="subject-slot" contenteditable="true">{{slot.thursday}}</div>
            <div class="subject-slot" contenteditable="true">{{slot.friday}}</div>
          </ng-container>
        </div>
      </div>

      <!-- Policy Center Section -->
      <div *ngIf="activeSection === 'policies'" class="section policies-section">
        <h2>Policy Center</h2>
        
        <div class="policy-cards">
          <div class="policy-card">
            <h3>Mastery Thresholds</h3>
            <div class="form-group">
              <label>Minimum Mastery Score (%)</label>
              <input type="number" [(ngModel)]="policies.masteryThreshold" min="0" max="100">
            </div>
          </div>

          <div class="policy-card">
            <h3>Late Penalties</h3>
            <div class="form-group">
              <label>Late Penalty (%)</label>
              <input type="number" [(ngModel)]="policies.latePenalty" min="0" max="100">
            </div>
          </div>

          <div class="policy-card">
            <h3>Alert Rules</h3>
            <div class="form-group">
              <label>Attendance Alert Threshold (%)</label>
              <input type="number" [(ngModel)]="policies.alertRules.attendanceThreshold" min="0" max="100">
            </div>
            <div class="form-group">
              <label>Grade Alert Threshold (%)</label>
              <input type="number" [(ngModel)]="policies.alertRules.gradeThreshold" min="0" max="100">
            </div>
          </div>
        </div>

        <button class="update-btn" (click)="updatePolicies()">
          <i class="fas fa-save"></i>
          Update Policies
        </button>
      </div>

      <!-- Audit Log Section -->
      <div *ngIf="activeSection === 'audit'" class="section audit-section">
        <h2>Audit Log Viewer</h2>
        
        <div class="audit-controls">
          <button class="export-btn" (click)="exportAuditLog()">
            <i class="fas fa-download"></i>
            Export Log
          </button>
        </div>

        <div class="audit-table">
          <div class="table-header">
            <div>Timestamp</div>
            <div>User</div>
            <div>Action</div>
            <div>Details</div>
          </div>
          <div *ngFor="let log of auditLogs" class="table-row">
            <div>{{log.timestamp}}</div>
            <div>{{log.user}}</div>
            <div>{{log.action}}</div>
            <div>{{log.details}}</div>
          </div>
        </div>
      </div>

      <!-- Class Creation Wizard -->
      <div *ngIf="activeSection === 'class-wizard'" class="section class-wizard-section">
        <h2>Class Creation Wizard</h2>
        
        <div class="wizard-form">
          <h3>Create New Class</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Class Name *</label>
              <input type="text" [(ngModel)]="newClass.name" placeholder="e.g., Mathematics 10A" required>
            </div>
            
            <div class="form-group">
              <label>Grade Level *</label>
              <select [(ngModel)]="newClass.grade" required>
                <option value="">Select Grade</option>
                <option *ngFor="let grade of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="'Grade ' + grade">Grade {{grade}}</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Subject *</label>
              <select [(ngModel)]="newClass.subject" required>
                <option value="">Select Subject</option>
                <option value="Mathematics">Mathematics</option>
                <option value="English">English</option>
                <option value="Science">Science</option>
                <option value="Physics">Physics</option>
                <option value="Chemistry">Chemistry</option>
                <option value="Biology">Biology</option>
                <option value="History">History</option>
                <option value="Geography">Geography</option>
                <option value="Physical Education">Physical Education</option>
                <option value="Art">Art</option>
                <option value="Music">Music</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Class Teacher *</label>
              <select [(ngModel)]="newClass.teacherId" (change)="onTeacherChange()" required>
                <option value="">Select Teacher</option>
                <option *ngFor="let teacher of getAvailableTeachers()" [value]="teacher.id" [disabled]="teacher.classCount >= teacher.maxClasses">
                  {{teacher.name}} - {{teacher.subject}} ({{teacher.classCount}}/{{teacher.maxClasses}} classes)
                </option>
              </select>
            </div>
            
            <div *ngIf="selectedTeacher" class="teacher-info">
              <div class="teacher-workload">
                <span class="workload-label">Teacher Workload:</span>
                <div class="workload-bar">
                  <div class="workload-fill" [style.width.%]="(selectedTeacher.classCount / selectedTeacher.maxClasses) * 100" [ngClass]="getWorkloadClass(selectedTeacher)"></div>
                </div>
                <span class="workload-text">{{selectedTeacher.classCount}}/{{selectedTeacher.maxClasses}} classes</span>
              </div>
            </div>
            
            <div class="form-group">
              <label>Classroom *</label>
              <select [(ngModel)]="newClass.classroom" required>
                <option value="">Select Classroom</option>
                <option value="Room 101">Room 101</option>
                <option value="Room 102">Room 102</option>
                <option value="Lab 1">Lab 1</option>
                <option value="Lab 2">Lab 2</option>
                <option value="Gym">Gymnasium</option>
                <option value="Art Room">Art Room</option>
                <option value="Music Room">Music Room</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Maximum Students</label>
              <input type="number" [(ngModel)]="newClass.maxStudents" min="1" max="50" value="30">
            </div>
            
            <div class="form-group">
              <label>Academic Year *</label>
              <select [(ngModel)]="newClass.academicYear" required>
                <option value="2024-2025">2024-2025</option>
                <option value="2025-2026">2025-2026</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Term *</label>
              <select [(ngModel)]="newClass.term" required>
                <option value="Term 1">Term 1</option>
                <option value="Term 2">Term 2</option>
                <option value="Term 3">Term 3</option>
              </select>
            </div>
          </div>
          
          <!-- Timetable Section -->
          <div class="timetable-section">
            <h4>Class Timetable</h4>
            <div class="timetable-grid">
              <div class="time-header">Time</div>
              <div class="day-header">Monday</div>
              <div class="day-header">Tuesday</div>
              <div class="day-header">Wednesday</div>
              <div class="day-header">Thursday</div>
              <div class="day-header">Friday</div>
              
              <ng-container *ngFor="let slot of timeSlots">
                <div class="time-slot">{{slot}}</div>
                <div class="schedule-slot">
                  <input type="checkbox" [(ngModel)]="newClass.schedule[slot + '_monday']">
                </div>
                <div class="schedule-slot">
                  <input type="checkbox" [(ngModel)]="newClass.schedule[slot + '_tuesday']">
                </div>
                <div class="schedule-slot">
                  <input type="checkbox" [(ngModel)]="newClass.schedule[slot + '_wednesday']">
                </div>
                <div class="schedule-slot">
                  <input type="checkbox" [(ngModel)]="newClass.schedule[slot + '_thursday']">
                </div>
                <div class="schedule-slot">
                  <input type="checkbox" [(ngModel)]="newClass.schedule[slot + '_friday']">
                </div>
              </ng-container>
            </div>
          </div>
          
          <!-- Auto-Assignment Settings -->
          <div class="auto-assignment">
            <h4>Automatic Student Assignment</h4>
            <div class="assignment-info">
              <div class="info-card">
                <div class="info-icon">
                  <i class="fas fa-users"></i>
                </div>
                <div class="info-content">
                  <h5>Target Enrollment</h5>
                  <p>{{newClass.maxStudents}} students</p>
                </div>
              </div>
              <div class="info-card">
                <div class="info-icon">
                  <i class="fas fa-user-graduate"></i>
                </div>
                <div class="info-content">
                  <h5>Available Students</h5>
                  <p>{{getAvailableStudentCount()}} in {{newClass.grade}}</p>
                </div>
              </div>
              <div class="info-card">
                <div class="info-icon">
                  <i class="fas fa-check-circle"></i>
                </div>
                <div class="info-content">
                  <h5>Auto-Assignment</h5>
                  <p>Students will be assigned automatically</p>
                </div>
              </div>
            </div>
            <div class="assignment-note">
              <i class="fas fa-info-circle"></i>
              <p>Students will be automatically assigned to this class when it's created. Once the target number ({{newClass.maxStudents}}) is reached, the class will be closed to new enrollments.</p>
            </div>
          </div>
          
          <div class="form-actions">
            <button class="create-class-btn" (click)="createClass()">
              <i class="fas fa-plus"></i>
              Create Class
            </button>
            <button class="preview-class-btn" (click)="previewClass()">
              <i class="fas fa-eye"></i>
              Preview
            </button>
          </div>
        </div>
        
        <!-- Existing Classes -->
        <div class="existing-classes">
          <h3>Existing Classes</h3>
          <div class="classes-table">
            <div class="table-header">
              <div>Class Name</div>
              <div>Grade</div>
              <div>Subject</div>
              <div>Teacher</div>
              <div>Students</div>
              <div>Status</div>
              <div>Actions</div>
            </div>
            <div *ngFor="let class of existingClasses" class="table-row">
              <div>{{class.name}}</div>
              <div>{{class.grade}}</div>
              <div>{{class.subject}}</div>
              <div>{{class.teacherName}}</div>
              <div>{{class.studentCount}}/{{class.maxStudents}}</div>
              <div>
                <span class="status-badge" [ngClass]="(class.status || 'Open').toLowerCase()">{{class.status || 'Open'}}</span>
              </div>
              <div class="class-actions">
                <button class="edit-class-btn" (click)="editClass(class)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="view-class-btn" (click)="viewClass(class)">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="delete-class-btn" (click)="deleteClass(class)">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Billing Section -->
      <div *ngIf="activeSection === 'billing'" class="section billing-section">
        <h2>Billing Management</h2>
        
        <div class="billing-form">
          <h3>Create New Bill</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Student *</label>
              <select [(ngModel)]="newBill.studentId" required>
                <option value="">Select Student</option>
                <option *ngFor="let student of students" [value]="student.id">{{student.name}} - {{student.grade}}</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Bill Type *</label>
              <select [(ngModel)]="newBill.billType" (change)="onBillTypeChange()" required>
                <option value="">Select Bill Type</option>
                <option value="tuition">Tuition Fees</option>
                <option value="transport">Transport Fees</option>
                <option value="meals">Meal Plan</option>
                <option value="activities">Extra Activities</option>
                <option value="books">Books & Materials</option>
                <option value="uniform">School Uniform</option>
                <option value="exam">Examination Fees</option>
                <option value="other">Other</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Description *</label>
              <input type="text" [(ngModel)]="newBill.description" placeholder="Enter bill description" required>
            </div>
            
            <div class="form-group">
              <label>Amount *</label>
              <input type="number" [(ngModel)]="newBill.amount" placeholder="0.00" step="0.01" required>
            </div>
            
            <div class="form-group">
              <label>Due Date *</label>
              <input type="date" [(ngModel)]="newBill.dueDate" required>
            </div>
            
            <div class="form-group">
              <label>Payment Method</label>
              <select [(ngModel)]="newBill.paymentMethod">
                <option value="any">Any Method</option>
                <option value="cash">Cash</option>
                <option value="card">Credit/Debit Card</option>
                <option value="bank_transfer">Bank Transfer</option>
                <option value="debit_order">Debit Order</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Priority</label>
              <select [(ngModel)]="newBill.priority">
                <option value="normal">Normal</option>
                <option value="urgent">Urgent</option>
              </select>
            </div>
            
            <div class="form-group full-width">
              <label>Additional Notes</label>
              <textarea [(ngModel)]="newBill.notes" rows="3" placeholder="Any additional information for parents"></textarea>
            </div>
          </div>
          
          <div class="form-actions">
            <button class="create-bill-btn" (click)="createBill()">
              <i class="fas fa-plus"></i>
              Create Bill
            </button>
            <button class="bulk-bill-btn" (click)="showBulkBilling = !showBulkBilling">
              <i class="fas fa-layer-group"></i>
              Bulk Billing
            </button>
            <button class="schedule-bill-btn" (click)="showScheduleBilling = !showScheduleBilling">
              <i class="fas fa-calendar-alt"></i>
              Schedule Billing
            </button>
          </div>
        </div>
        
        <!-- Bulk Billing -->
        <div *ngIf="showBulkBilling" class="bulk-billing-form">
          <h3>Bulk Billing</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Target Group *</label>
              <select [(ngModel)]="bulkBill.targetGroup" (change)="onBulkTargetChange()">
                <option value="">Select Target Group</option>
                <option value="all_students">All Students</option>
                <option value="by_grade">By Grade</option>
                <option value="by_class">By Class</option>
              </select>
            </div>
            
            <div *ngIf="bulkBill.targetGroup === 'by_grade'" class="form-group">
              <label>Grade</label>
              <select [(ngModel)]="bulkBill.grade">
                <option value="">Select Grade</option>
                <option *ngFor="let grade of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="'Grade ' + grade">Grade {{grade}}</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Bill Type *</label>
              <select [(ngModel)]="bulkBill.billType">
                <option value="tuition">Tuition Fees</option>
                <option value="transport">Transport Fees</option>
                <option value="meals">Meal Plan</option>
                <option value="activities">Extra Activities</option>
                <option value="books">Books & Materials</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Amount *</label>
              <input type="number" [(ngModel)]="bulkBill.amount" step="0.01">
            </div>
            
            <div class="form-group">
              <label>Due Date *</label>
              <input type="date" [(ngModel)]="bulkBill.dueDate">
            </div>
          </div>
          
          <button class="create-bulk-bill-btn" (click)="createBulkBill()">
            <i class="fas fa-paper-plane"></i>
            Send Bulk Bills
          </button>
        </div>

        <!-- Schedule Billing -->
        <div *ngIf="showScheduleBilling" class="schedule-billing-form">
          <h3>Automated Billing Schedule</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Schedule Name *</label>
              <input type="text" [(ngModel)]="scheduleBill.name" placeholder="e.g., Monthly Tuition">
            </div>
            
            <div class="form-group">
              <label>Target Group *</label>
              <select [(ngModel)]="scheduleBill.targetGroup">
                <option value="all_students">All Students</option>
                <option value="by_grade">By Grade</option>
              </select>
            </div>
            
            <div *ngIf="scheduleBill.targetGroup === 'by_grade'" class="form-group">
              <label>Grade</label>
              <select [(ngModel)]="scheduleBill.grade">
                <option *ngFor="let grade of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="'Grade ' + grade">Grade {{grade}}</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Bill Type *</label>
              <select [(ngModel)]="scheduleBill.billType">
                <option value="tuition">Tuition Fees</option>
                <option value="transport">Transport Fees</option>
                <option value="meals">Meal Plan</option>
                <option value="activities">Extra Activities</option>
                <option value="sports">Sports Fees</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Amount *</label>
              <input type="number" [(ngModel)]="scheduleBill.amount" step="0.01">
            </div>
            
            <div class="form-group">
              <label>Frequency *</label>
              <select [(ngModel)]="scheduleBill.frequency">
                <option value="monthly">Monthly</option>
                <option value="quarterly">Quarterly</option>
                <option value="annually">Annually</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Start Date *</label>
              <input type="date" [(ngModel)]="scheduleBill.startDate">
            </div>
            
            <div class="form-group">
              <label>Due Day of Month</label>
              <select [(ngModel)]="scheduleBill.dueDay">
                <option *ngFor="let day of [1,5,10,15,20,25,30]" [value]="day">{{day}}th of each month</option>
              </select>
            </div>
            
            <div class="form-group full-width">
              <label class="checkbox-label">
                <input type="checkbox" [(ngModel)]="scheduleBill.autoGenerate">
                Auto-generate bills (bills will be created automatically)
              </label>
            </div>
          </div>
          
          <button class="create-schedule-btn" (click)="createSchedule()">
            <i class="fas fa-calendar-plus"></i>
            Create Schedule
          </button>
        </div>

        <!-- Active Schedules -->
        <div class="active-schedules">
          <h3>Active Billing Schedules</h3>
          <div class="schedules-grid">
            <div *ngFor="let schedule of activeSchedules" class="schedule-card">
              <div class="schedule-header">
                <h4>{{schedule.name}}</h4>
                <span class="frequency-badge">{{schedule.frequency}}</span>
              </div>
              <div class="schedule-details">
                <p><strong>Type:</strong> {{getBillTypeLabel(schedule.billType)}}</p>
                <p><strong>Amount:</strong> ${{schedule.amount}}</p>
                <p><strong>Target:</strong> {{schedule.targetGroup}}</p>
                <p><strong>Next Bill:</strong> {{schedule.nextBillDate}}</p>
              </div>
              <div class="schedule-actions">
                <button class="edit-schedule-btn" (click)="editSchedule(schedule)">
                  <i class="fas fa-edit"></i>
                  Edit
                </button>
                <button class="pause-schedule-btn" (click)="toggleSchedule(schedule)">
                  <i class="fas" [ngClass]="schedule.active ? 'fa-pause' : 'fa-play'"></i>
                  {{schedule.active ? 'Pause' : 'Resume'}}
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Recent Bills -->
        <div class="recent-bills">
          <h3>Recent Bills</h3>
          <div class="bills-table">
            <div class="table-header">
              <div>Student</div>
              <div>Bill Type</div>
              <div>Amount</div>
              <div>Due Date</div>
              <div>Status</div>
              <div>Actions</div>
            </div>
            <div *ngFor="let bill of recentBills" class="table-row">
              <div>{{bill.studentName}}</div>
              <div>
                <span class="bill-type-badge" [ngClass]="bill.billType">{{getBillTypeLabel(bill.billType)}}</span>
              </div>
              <div class="amount">${{bill.amount}}</div>
              <div>{{bill.dueDate}}</div>
              <div>
                <span class="status-badge" [ngClass]="bill.status">{{bill.status}}</span>
              </div>
              <div class="bill-actions">
                <button class="view-bill-btn" (click)="viewBill(bill)">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="send-reminder-btn" (click)="sendReminder(bill)">
                  <i class="fas fa-bell"></i>
                </button>
                <button class="delete-bill-btn" (click)="deleteBill(bill)">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Announcements Section -->
      <div *ngIf="activeSection === 'announcements'" class="section announcements-section">
        <h2>Announcements</h2>
        
        <div class="announcement-form">
          <h3>Create New Announcement</h3>
          <div class="form-grid">
            <div class="form-group full-width">
              <label>Announcement Title *</label>
              <input type="text" [(ngModel)]="newAnnouncement.title" placeholder="Enter announcement title" required>
            </div>
            
            <div class="form-group full-width">
              <label>Message *</label>
              <textarea [(ngModel)]="newAnnouncement.message" rows="4" placeholder="Enter your announcement message" required></textarea>
            </div>
            
            <div class="form-group">
              <label>Target Audience *</label>
              <select [(ngModel)]="newAnnouncement.targetType" (change)="onTargetTypeChange()" required>
                <option value="">Select Audience</option>
                <option value="everyone">Everyone</option>
                <option value="teachers">Teachers</option>
                <option value="parents">Parents</option>
                <option value="students">Students</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Priority Level</label>
              <select [(ngModel)]="newAnnouncement.priority">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
                <option value="urgent">Urgent</option>
              </select>
            </div>
            
            <!-- Teachers Filter -->
            <div *ngIf="newAnnouncement.targetType === 'teachers'" class="form-group">
              <label>Subject Filter</label>
              <select [(ngModel)]="newAnnouncement.subjectFilter">
                <option value="">All Subjects</option>
                <option value="Mathematics">Mathematics</option>
                <option value="English">English</option>
                <option value="Science">Science</option>
                <option value="History">History</option>
                <option value="Physical Education">Physical Education</option>
              </select>
            </div>
            
            <!-- Parents Filter -->
            <div *ngIf="newAnnouncement.targetType === 'parents'" class="form-group">
              <label>Grade Filter</label>
              <select [(ngModel)]="newAnnouncement.gradeFilter">
                <option value="">All Grades</option>
                <option *ngFor="let grade of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="'Grade ' + grade">Grade {{grade}}</option>
              </select>
            </div>
            
            <div *ngIf="newAnnouncement.targetType === 'parents'" class="form-group">
              <label>Subject Filter</label>
              <select [(ngModel)]="newAnnouncement.subjectFilter">
                <option value="">All Subjects</option>
                <option value="Mathematics">Mathematics</option>
                <option value="English">English</option>
                <option value="Science">Science</option>
                <option value="History">History</option>
              </select>
            </div>
            
            <!-- Students Filter -->
            <div *ngIf="newAnnouncement.targetType === 'students'" class="form-group">
              <label>Grade Filter</label>
              <select [(ngModel)]="newAnnouncement.gradeFilter">
                <option value="">All Grades</option>
                <option *ngFor="let grade of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="'Grade ' + grade">Grade {{grade}}</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Schedule</label>
              <select [(ngModel)]="newAnnouncement.scheduleType">
                <option value="immediate">Send Immediately</option>
                <option value="scheduled">Schedule for Later</option>
              </select>
            </div>
            
            <div *ngIf="newAnnouncement.scheduleType === 'scheduled'" class="form-group">
              <label>Schedule Date & Time</label>
              <input type="datetime-local" [(ngModel)]="newAnnouncement.scheduledTime">
            </div>
          </div>
          
          <div class="form-actions">
            <button class="send-announcement-btn" (click)="sendAnnouncement()">
              <i class="fas fa-paper-plane"></i>
              {{newAnnouncement.scheduleType === 'scheduled' ? 'Schedule' : 'Send'}} Announcement
            </button>
            <button class="preview-btn" (click)="previewAnnouncement()">
              <i class="fas fa-eye"></i>
              Preview
            </button>
          </div>
        </div>
        
        <!-- Recent Announcements -->
        <div class="recent-announcements">
          <h3>Recent Announcements</h3>
          <div class="announcements-list">
            <div *ngFor="let announcement of recentAnnouncements" class="announcement-card">
              <div class="announcement-header">
                <h4>{{announcement.title}}</h4>
                <span class="priority-badge" [ngClass]="announcement.priority">{{announcement.priority}}</span>
              </div>
              <p class="announcement-message">{{announcement.message}}</p>
              <div class="announcement-meta">
                <span class="target-info">
                  <i class="fas fa-users"></i>
                  {{getTargetDescription(announcement)}}
                </span>
                <span class="date-info">
                  <i class="fas fa-calendar"></i>
                  {{announcement.createdDate}}
                </span>
                <span class="status-info">
                  <i class="fas fa-check-circle" [class.sent]="announcement.status === 'sent'"></i>
                  {{announcement.status}}
                </span>
              </div>
              <div class="announcement-actions">
                <button class="edit-announcement-btn" (click)="editAnnouncement(announcement)">
                  <i class="fas fa-edit"></i>
                  Edit
                </button>
                <button class="delete-announcement-btn" (click)="deleteAnnouncement(announcement)">
                  <i class="fas fa-trash"></i>
                  Delete
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Teacher Heatmap Section -->
      <div *ngIf="activeSection === 'teacher-heatmap'" class="section heatmap-section">
        <h2>Teacher Performance Heatmap</h2>
        
        <div class="heatmap-controls">
          <div class="filter-group">
            <label>Department:</label>
            <select [(ngModel)]="selectedDepartment">
              <option value="">All Departments</option>
              <option value="Mathematics">Mathematics</option>
              <option value="English">English</option>
              <option value="Science">Science</option>
              <option value="History">History</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Time Period:</label>
            <select [(ngModel)]="selectedPeriod">
              <option value="current">Current Month</option>
              <option value="quarter">This Quarter</option>
              <option value="year">This Year</option>
            </select>
          </div>
        </div>

        <div class="performance-legend">
          <h4>Performance Indicators</h4>
          <div class="legend-items">
            <div class="legend-item">
              <div class="legend-color excellent"></div>
              <span>Excellent (90-100%)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color good"></div>
              <span>Good (75-89%)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color average"></div>
              <span>Average (60-74%)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color poor"></div>
              <span>Below Target (<60%)</span>
            </div>
          </div>
        </div>

        <div class="heatmap-grid">
          <div *ngFor="let teacher of teacherPerformance" class="teacher-card" [ngClass]="getPerformanceClass(teacher.overallScore)">
            <div class="teacher-header">
              <div class="teacher-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="teacher-info">
                <h4>{{teacher.name}}</h4>
                <p>{{teacher.department}}</p>
                <span class="employee-id">ID: {{teacher.employeeId}}</span>
              </div>
              <div class="overall-score">
                <span class="score-value">{{teacher.overallScore}}%</span>
                <span class="score-label">Overall</span>
              </div>
            </div>
            
            <div class="metrics-grid">
              <div class="metric">
                <span class="metric-label">Student Pass Rate</span>
                <div class="metric-bar">
                  <div class="metric-fill" [style.width.%]="teacher.passRate" [ngClass]="getMetricClass(teacher.passRate)"></div>
                </div>
                <span class="metric-value">{{teacher.passRate}}%</span>
              </div>
              
              <div class="metric">
                <span class="metric-label">Attendance Rate</span>
                <div class="metric-bar">
                  <div class="metric-fill" [style.width.%]="teacher.attendanceRate" [ngClass]="getMetricClass(teacher.attendanceRate)"></div>
                </div>
                <span class="metric-value">{{teacher.attendanceRate}}%</span>
              </div>
              
              <div class="metric">
                <span class="metric-label">Assignment Completion</span>
                <div class="metric-bar">
                  <div class="metric-fill" [style.width.%]="teacher.assignmentCompletion" [ngClass]="getMetricClass(teacher.assignmentCompletion)"></div>
                </div>
                <span class="metric-value">{{teacher.assignmentCompletion}}%</span>
              </div>
              
              <div class="metric">
                <span class="metric-label">Parent Satisfaction</span>
                <div class="metric-bar">
                  <div class="metric-fill" [style.width.%]="teacher.parentSatisfaction" [ngClass]="getMetricClass(teacher.parentSatisfaction)"></div>
                </div>
                <span class="metric-value">{{teacher.parentSatisfaction}}%</span>
              </div>
            </div>
            
            <div class="action-area">
              <button class="view-details-btn" (click)="viewTeacherDetails(teacher)">
                <i class="fas fa-eye"></i>
                View Details
              </button>
              <button *ngIf="teacher.overallScore < 75" class="support-btn" (click)="provideSupportPlan(teacher)">
                <i class="fas fa-hands-helping"></i>
                Support Plan
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- User Management Section -->
      <div *ngIf="activeSection === 'user-management'" class="section user-management-section">
        <h2>User Management</h2>
        
        <div class="user-actions">
          <button class="create-user-btn" (click)="showCreateUserForm = !showCreateUserForm">
            <i class="fas fa-user-plus"></i>
            Create New User
          </button>
        </div>

        <!-- Create User Form -->
        <div *ngIf="showCreateUserForm" class="create-user-form">
          <h3>Create New User</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>First Name *</label>
              <input type="text" [(ngModel)]="newUser.firstName" required>
            </div>
            <div class="form-group">
              <label>Last Name *</label>
              <input type="text" [(ngModel)]="newUser.lastName" required>
            </div>
            <div class="form-group">
              <label>Email *</label>
              <input type="email" [(ngModel)]="newUser.email" required>
            </div>
            <div class="form-group">
              <label>Phone Number</label>
              <input type="tel" [(ngModel)]="newUser.phone">
            </div>
            <div class="form-group">
              <label>User Role *</label>
              <select [(ngModel)]="newUser.role" required>
                <option value="">Select Role</option>
                <option value="Teacher">Teacher</option>
                <option value="Admin">Admin</option>
                <option value="Principal">Principal</option>
                <option value="Secretary">Secretary</option>
                <option value="Librarian">Librarian</option>
              </select>
            </div>
            <div class="form-group">
              <label>Department</label>
              <select [(ngModel)]="newUser.department">
                <option value="">Select Department</option>
                <option value="Mathematics">Mathematics</option>
                <option value="English">English</option>
                <option value="Science">Science</option>
                <option value="History">History</option>
                <option value="Physical Education">Physical Education</option>
                <option value="Administration">Administration</option>
              </select>
            </div>
            <div class="form-group">
              <label>Employee ID</label>
              <input type="text" [(ngModel)]="newUser.employeeId">
            </div>
            <div class="form-group">
              <label>Start Date</label>
              <input type="date" [(ngModel)]="newUser.startDate">
            </div>
          </div>
          <div class="form-actions">
            <button class="save-user-btn" (click)="createUser()">
              <i class="fas fa-save"></i>
              Create User
            </button>
            <button class="cancel-btn" (click)="showCreateUserForm = false">
              <i class="fas fa-times"></i>
              Cancel
            </button>
          </div>
        </div>

        <!-- Users List -->
        <div class="users-list">
          <h3>Existing Users</h3>
          <div class="users-table">
            <div class="table-header">
              <div>Name</div>
              <div>Email</div>
              <div>Role</div>
              <div>Department</div>
              <div>Status</div>
              <div>Actions</div>
            </div>
            <div *ngFor="let user of users" class="table-row">
              <div>{{user.firstName}} {{user.lastName}}</div>
              <div>{{user.email}}</div>
              <div>
                <span class="role-badge" [ngClass]="user.role.toLowerCase()">{{user.role}}</span>
              </div>
              <div>{{user.department}}</div>
              <div>
                <span class="status-badge" [ngClass]="user.status.toLowerCase()">{{user.status}}</span>
              </div>
              <div class="action-buttons">
                <button class="edit-user-btn" (click)="editUser(user)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="toggle-status-btn" (click)="toggleUserStatus(user)">
                  <i class="fas" [ngClass]="user.status === 'Active' ? 'fa-pause' : 'fa-play'"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Role Permissions Section -->
      <div *ngIf="activeSection === 'permissions'" class="section permissions-section">
        <h2>Role Permissions Matrix</h2>
        
        <div class="roles-grid">
          <div *ngFor="let role of roles" class="role-card">
            <h3>{{role.name}}</h3>
            <div class="permissions-list">
              <div *ngFor="let permission of role.permissions" class="permission-tag">
                {{permission}}
              </div>
            </div>
            <button class="edit-btn" (click)="updateRole(role)">
              <i class="fas fa-edit"></i>
              Edit Role
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>